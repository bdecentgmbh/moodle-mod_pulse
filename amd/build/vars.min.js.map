{"version":3,"file":"vars.min.js","sources":["../src/vars.js"],"sourcesContent":["// This file is part of Moodle - http://moodle.org/\n//\n// Moodle is free software: you can redistribute it and/or modify\n// it under the terms of the GNU General Public License as published by\n// the Free Software Foundation, either version 3 of the License, or\n// (at your option) any later version.\n//\n// Moodle is distributed in the hope that it will be useful,\n// but WITHOUT ANY WARRANTY; without even the implied warranty of\n// MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n// GNU General Public License for more details.\n//\n// You should have received a copy of the GNU General Public License\n// along with Moodle.  If not, see <http://www.gnu.org/licenses/>.\n\n/**\n * vars javascript to place the placeholders.\n * Modified version of IOMAD Email template emailvars.\n *\n * @module   mod_pulse/vars\n * @copyright 2023, bdecent gmbh bdecent.de\n * @license   http://www.gnu.org/copyleft/gpl.html GNU GPL v3 or later\n */\n\ndefine(\"mod_pulse/vars\", [\"jquery\", 'core/str'], (function ($, Str) {\n\n    /**\n     * Toggle the placeholder container hide/show.\n     */\n    const initPlaceholderToggle = function () {\n\n        var selector = \".mod-pulse-emailvars-toggle\";\n\n        var emailvars = document.querySelectorAll(selector);\n\n        if (emailvars === undefined || emailvars === null) {\n            return;\n        }\n\n        emailvars.forEach((editor) => {\n            editor.querySelector('.email-vars-button').addEventListener('click', (e) => {\n                e.preventDefault();\n\n                var target = e.target.closest('a');\n                var btnurl = target.getAttribute('href'); // Get the clicked placeholder element vars content selector.\n                var toggleIcon = target.querySelector('i');\n                var varsContent = document.querySelector(btnurl); // Email vars content body.\n\n                varsContent.classList.toggle('show');\n\n                // Change the toggle icon direction.\n                toggleIcon.classList.toggle('fa-angle-double-up');\n                toggleIcon.classList.toggle('fa-angle-double-down');\n            });\n        });\n    };\n\n    /**\n     * Email vars placeholders show more / show less.\n     */\n    const initVarsExpand = function () {\n        var selector = '.mod-pulse-emailvars-toggle .pulse-email-placeholders li .button-show-more';\n\n        var placeholders = document.querySelectorAll(selector);\n\n        if (placeholders === undefined || placeholders === null) {\n            return;\n        }\n\n        placeholders.forEach((showmorebtn) => {\n            showmorebtn.addEventListener('click', (e) => {\n                e.preventDefault();\n                var target = e.target.closest('a');\n                var placeholderurl = target.getAttribute('href'); // Get the clicked show more element placeholder content selector.\n                var placeholderContent = document.querySelector(placeholderurl); // Placeholder content body.\n                placeholderContent.classList.toggle('less');\n\n                if (target.innerHTML == 'Show more') {\n                    var showless = Str.get_string('showless', 'mod_pulse');\n                    showless.done(function (localizedShowlessString) {\n                        target.innerHTML = localizedShowlessString;\n                    });\n                } else {\n                    var showmore = Str.get_string('showmore', 'mod_pulse');\n                    showmore.done(function (localizedShowmoreString) {\n                        target.innerHTML = localizedShowmoreString;\n                    });\n                }\n            });\n        });\n    };\n\n    return {\n\n        init: function () {\n            initPlaceholderToggle();\n            initVarsExpand();\n        },\n    };\n\n}));\n"],"names":["define","$","Str","init","emailvars","placeholders","document","querySelectorAll","forEach","editor","querySelector","addEventListener","e","preventDefault","target","closest","btnurl","getAttribute","toggleIcon","classList","toggle","showmorebtn","placeholderurl","innerHTML","get_string","done","localizedShowlessString","localizedShowmoreString"],"mappings":";;;;;;;;AAwBAA,wBAAyB,CAAC,SAAU,aAAc,SAAUC,EAAGC,WAoEpD,CAEHC,KAAM,WAjEoB,IAItBC,UA8BAC,aA5BAD,OAFAA,UAAYE,SAASC,iBAFV,iCAQfH,UAAUI,SAASC,SACfA,OAAOC,cAAc,sBAAsBC,iBAAiB,SAAUC,IAClEA,EAAEC,qBAEEC,OAASF,EAAEE,OAAOC,QAAQ,KAC1BC,OAASF,OAAOG,aAAa,QAC7BC,WAAaJ,OAAOJ,cAAc,KACpBJ,SAASI,cAAcM,QAE7BG,UAAUC,OAAO,QAG7BF,WAAWC,UAAUC,OAAO,sBAC5BF,WAAWC,UAAUC,OAAO,8BAahCf,OAFAA,aAAeC,SAASC,iBAFb,gFAQfF,aAAaG,SAASa,cAClBA,YAAYV,iBAAiB,SAAUC,IACnCA,EAAEC,qBACEC,OAASF,EAAEE,OAAOC,QAAQ,KAC1BO,eAAiBR,OAAOG,aAAa,QAChBX,SAASI,cAAcY,gBAC7BH,UAAUC,OAAO,QAEZ,aAApBN,OAAOS,UACQrB,IAAIsB,WAAW,WAAY,aACjCC,MAAK,SAAUC,yBACpBZ,OAAOS,UAAYG,2BAGRxB,IAAIsB,WAAW,WAAY,aACjCC,MAAK,SAAUE,yBACpBb,OAAOS,UAAYI"}