define("mod_pulse/modal_preset",["jquery","core/notification","core/custom_interaction_events","core/modal","core/modal_registry","mod_pulse/events"],(function($,Notification,CustomEvents,Modal,ModalRegistry,PresetEvents){var registered=!1,SELECTORS_SAVE_BUTTON='[data-action="save"]',SELECTORS_CUSTOMIZE_BUTTON='[data-action="customize"]',SELECTORS_CANCEL_BUTTON='[data-action="cancel"]',ModalPreset=function(root){Modal.call(this,root),this.getFooter().find(SELECTORS_SAVE_BUTTON).length||Notification.exception({message:'No "Apply and save" button found'}),this.getFooter().find(SELECTORS_CUSTOMIZE_BUTTON).length||Notification.exception({message:'No "Apply and customize" button found'}),this.getFooter().find(SELECTORS_CANCEL_BUTTON).length||Notification.exception({message:"No cancel button found"})};return ModalPreset.TYPE="PresetModal",(ModalPreset.prototype=Object.create(Modal.prototype)).constructor=ModalPreset,ModalPreset.prototype.formData="",ModalPreset.prototype.registerEventListeners=function(){Modal.prototype.registerEventListeners.call(this),this.getModal().on(CustomEvents.events.activate,SELECTORS_SAVE_BUTTON,function(event,data){document.querySelectorAll(".preset-config-params form.mform").forEach((form=>{form.importmethod.value="save",form.addEventListener("submit",(function(e){e.preventDefault()}))})),document.querySelectorAll('.preset-config-params [data-fieldtype="submit"] input')[0].click();var approveEvent=$.Event(PresetEvents.save);this.getRoot().trigger(approveEvent,this),approveEvent.isDefaultPrevented()||(this.destroy(),data.originalEvent.preventDefault()),event.preventDefault()}.bind(this)),this.getModal().on(CustomEvents.events.activate,SELECTORS_CUSTOMIZE_BUTTON,function(event,data){document.querySelectorAll(".preset-config-params form.mform").forEach((form=>{form.importmethod.value="customize"}));var customizeEvent=$.Event(PresetEvents.customize);this.getRoot().trigger(customizeEvent,this),customizeEvent.isDefaultPrevented()||data.originalEvent.preventDefault(),event.preventDefault()}.bind(this)),this.getModal().on(CustomEvents.events.activate,SELECTORS_CANCEL_BUTTON,function(){this.destroy()}.bind(this))},registered||(ModalRegistry.register(ModalPreset.TYPE,ModalPreset,"mod_pulse/modal_preset"),registered=!0),ModalPreset}));

//# sourceMappingURL=modal_preset.min.js.map
